<template>
  <div>
    <br />
    <p>-- å½“å‰é¡µé¢>>> zhulié…ç½®</p>
    <p>ğŸ—¨ï¸ğŸ—¨ï¸ æ ¹æ®æ¨¡æ¿ [ç‚¹å‡»] è¿›è¡Œé€‰æ‹©ï¼Œé€‰ä¸­åç‚¹å‡»ã€Šå‘é€é…ç½®ç»“æœã€‹æŒ‰é’®!</p>
    <br />
    <el-divider content-position="left"
      ><el-tag type="success" round>æ¨¡æ¿åˆ—è¡¨ï¼š</el-tag></el-divider
    >
    <el-table
      :data="tableData"
      style="width: 100%"
      @row-click="handleRowClick"
      :current-row-key="selectedRowKey"
    >
      <el-table-column prop="mingcheng" label="mingcheng" />
      <el-table-column prop="bingzhong" label="bingzhong" />
      <el-table-column prop="dengji" label="dengji" />
      <el-table-column prop="zhujiang" label="zhujiang" />
      <el-table-column prop="jineng1" label="jineng1" />
      <el-table-column prop="jineng2" label="jineng2" />
      <el-table-column prop="fujiang1" label="fujiang" />
      <el-table-column prop="jineng1" label="jineng1" />
      <el-table-column prop="jineng2" label="jineng2" />
      <el-table-column prop="fujiang2" label="fujiang2" />
      <el-table-column prop="jineng1" label="jineng1" />
      <el-table-column prop="jineng2" label="jineng2" />
    </el-table>

    <br /><br />
    <div>
      <el-divider content-position="left"
        ><el-tag type="success" round>é€‰ä¸­æ¨¡æ¿ï¼š</el-tag></el-divider
      >

      <div v-if="selectedRow && Object.keys(selectedRow).length">
        <el-table :data="[selectedRow]" style="width: 100%; margin-top: 20px">
          <el-table-column prop="mingcheng" label="mingcheng" />
          <el-table-column prop="bingzhong" label="bingzhong" />
          <el-table-column prop="dengji" label="dengji" />
          <el-table-column prop="zhujiang" label="zhujiang" />
          <el-table-column prop="jineng1" label="jineng1" />
          <el-table-column prop="jineng2" label="jineng2" />
          <el-table-column prop="fujiang1" label="fujiang" />
          <el-table-column prop="jineng1" label="jineng1" />
          <el-table-column prop="jineng2" label="jineng2" />
          <el-table-column prop="fujiang2" label="fujiang2" />
          <el-table-column prop="jineng1" label="jineng1" />
          <el-table-column prop="jineng2" label="jineng2" />
        </el-table>
      </div>
      <div v-else>
        <el-alert
          title="æœªé€‰æ‹©ä»»ä½•æ¨¡æ¿ï¼Œè¯·å…ˆé€‰æ‹©ä¸€ä¸ªæ¨¡æ¿ã€‚"
          type="warning"
          show-icon
        />
      </div>
    </div>

    <br /><br />

    <el-button type="primary" :disabled="!selectedRow" @click="post">
      ğŸš€ å‘é€é…ç½®ç»“æœ
    </el-button>
  </div>
</template>

<script>
import { fetchData } from "../api";

export default {
  data() {
    return {
      tableData: [],
      selectedRowKey: null,
      selectedRow: null,
    };
  },
  methods: {
    async getData() {
      const response = await fetchData();
      console.log("response:", response);
      this.tableData = response.data;
    },

    handleRowClick(row) {
      this.selectedRow = row;
      this.selectedRowKey = row.date;
    },

    post() {
      ElMessage.success("ç»“æœå‘é€æˆåŠŸï¼");
    },
  },
  mounted() {
    this.getData();
  },
};
</script>
