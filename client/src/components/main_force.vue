<template>
  <div style="padding: 20px">
    <!-- æ ‡é¢˜ -->
    <p style="font-size: 29px; font-weight: bold; margin-bottom: 20px">
      ğŸ‘‹ å½“å‰é¡µé¢ï¼š [ ä¸»åŠ›é…ç½® ]
    </p>
    <p style="font-size: 20px; margin-bottom: 20px">
      ğŸ—¨ï¸ æ ¹æ®æ¨¡æ¿ [ç‚¹å‡»] è¿›è¡Œé€‰æ‹©ï¼Œé€‰ä¸­åå¯ç‚¹å‡»è¿›è¡Œç¼–è¾‘ã€‚
    </p>
    <br />
    <!-- æ¨¡æ¿åˆ—è¡¨ -->
    <el-divider content-position="left">
      <el-tag
        type="success"
        round
        style="font-size: 22px; background-color: #e0f7fa; color: #00796b"
      >
        æ¨¡æ¿åˆ—è¡¨ï¼š
      </el-tag>
    </el-divider>

    <!-- è¡¨æ ¼ -->
    <el-table
      :data="tableData"
      highlight-current-row
      @row-click="handleRowClick"
      :current-row-key="selectedRowKey"
      class="custom-table"
      style="margin-bottom: 20px"
    >
      <el-table-column prop="id" label="ID" width="80" />
      <el-table-column prop="type" label="ç±»å‹" width="120" />
      <el-table-column prop="name" label="ä¸»å°†" />
      <el-table-column prop="aos" label="å…µç§" width="100" />
      <el-table-column prop="level" label="ç­‰çº§" width="100" />
      <el-table-column prop="g1" label="å‰¯å°†1" />
      <el-table-column prop="g1_s1" label="å‰¯å°†1æŠ€èƒ½1" />
      <el-table-column prop="g1_s2" label="å‰¯å°†1æŠ€èƒ½2" />
      <el-table-column prop="g2" label="å‰¯å°†2" />
      <el-table-column prop="g2_s1" label="å‰¯å°†2æŠ€èƒ½1" />
      <el-table-column prop="g2_s2" label="å‰¯å°†2æŠ€èƒ½2" />
      <el-table-column prop="g3" label="å‰¯å°†3" />
      <el-table-column prop="g3_s1" label="å‰¯å°†3æŠ€èƒ½1" />
      <el-table-column prop="g3_s2" label="å‰¯å°†3æŠ€èƒ½2" />
    </el-table>
    
    <br />
    <!-- ç¼–è¾‘è¡¨å• -->
    <el-divider content-position="left">
      <el-tag
        type="success"
        round
        style="font-size: 22px; background-color: #e0f7fa; color: #00796b"
      >
        ç¼–è¾‘è¡¨å•:
      </el-tag>
    </el-divider>

    <!-- ç¼–è¾‘è¡¨å• -->
    <div v-if="selectedRow && Object.keys(selectedRow).length">
      <el-form
        :model="selectedRow"
        label-width="100px"
        style="font-size: 16px; max-width: 800px; margin: 0 auto"
      >
        <!-- åŸºæœ¬ä¿¡æ¯ -->
        <el-row style="margin-bottom: 15px">
          <el-col :span="6">
            <el-form-item label="ID" style="margin-bottom: 0">
              <el-input
                v-model="selectedRow.id"
                disabled
                style="max-width: 100%"
              />
            </el-form-item>
          </el-col>
          <el-col :span="6">
            <el-form-item label="ä¸»å°†" style="margin-bottom: 0">
              <el-input v-model="selectedRow.name" style="max-width: 100%" />
            </el-form-item>
          </el-col>
          <el-col :span="6">
            <el-form-item label="å…µç§" style="margin-bottom: 0">
              <el-input v-model="selectedRow.aos" style="max-width: 100%" />
            </el-form-item>
          </el-col>
          <el-col :span="6">
            <el-form-item label="ç­‰çº§" style="margin-bottom: 0">
              <el-input v-model="selectedRow.level" style="max-width: 100%" />
            </el-form-item>
          </el-col>
        </el-row>

        <!-- å‰¯å°†1 -->

        <!-- <el-divider content-position="left" style="margin: 20px 0">
          <el-tag
            type="info"
            round
            style="font-size: 18px; background-color: #e3f2fd; color: #1e88e5"
          >
            å‰¯å°†1
          </el-tag>
        </el-divider> -->
        <br />
        <el-form-item label="å‰¯å°†1åç§°" style="margin-bottom: 10px">
          <el-input v-model="selectedRow.g1" style="max-width: 100%" />
        </el-form-item>
        <el-form-item label="å‰¯å°†1æŠ€èƒ½">
          <el-row style="align-items: center">
            <el-col :span="11" style="margin-right: 5px">
              <el-input
                v-model="selectedRow.g1_s1"
                placeholder="æŠ€èƒ½1"
                style="max-width: 100%"
              />
            </el-col>
            <el-col :span="11">
              <el-input
                v-model="selectedRow.g1_s2"
                placeholder="æŠ€èƒ½2"
                style="max-width: 100%"
              />
            </el-col>
          </el-row>
        </el-form-item>

        <!-- å‰¯å°†2 -->
        <!-- <el-divider content-position="left" style="margin: 20px 0">
          <el-tag
            type="info"
            round
            style="font-size: 18px; background-color: #e3f2fd; color: #1e88e5"
          >
            å‰¯å°†2
          </el-tag>
        </el-divider> -->
        <br />

        <el-form-item label="å‰¯å°†2åç§°" style="margin-bottom: 10px">
          <el-input v-model="selectedRow.g2" style="max-width: 100%" />
        </el-form-item>
        <el-form-item label="å‰¯å°†2æŠ€èƒ½">
          <el-row style="align-items: center">
            <el-col :span="11" style="margin-right: 5px">
              <el-input
                v-model="selectedRow.g2_s1"
                placeholder="æŠ€èƒ½1"
                style="max-width: 100%"
              />
            </el-col>
            <el-col :span="11">
              <el-input
                v-model="selectedRow.g2_s2"
                placeholder="æŠ€èƒ½2"
                style="max-width: 100%"
              />
            </el-col>
          </el-row>
        </el-form-item>

        <!-- å‰¯å°†3 -->
        <!-- <el-divider content-position="left" style="margin: 20px 0">
          <el-tag
            type="info"
            round
            style="font-size: 18px; background-color: #e3f2fd; color: #1e88e5"
          >
            å‰¯å°†3
          </el-tag>
        </el-divider> -->
        <br />

        <el-form-item label="å‰¯å°†3åç§°" style="margin-bottom: 10px">
          <el-input v-model="selectedRow.g3" style="max-width: 100%" />
        </el-form-item>
        <el-form-item label="å‰¯å°†3æŠ€èƒ½">
          <el-row style="align-items: center">
            <el-col :span="11" style="margin-right: 5px">
              <el-input
                v-model="selectedRow.g3_s1"
                placeholder="æŠ€èƒ½1"
                style="max-width: 100%"
              />
            </el-col>
            <el-col :span="11">
              <el-input
                v-model="selectedRow.g3_s2"
                placeholder="æŠ€èƒ½2"
                style="max-width: 100%"
              />
            </el-col>
          </el-row>
        </el-form-item>
      </el-form>
      <br />
    </div>

    <!-- æœªé€‰æ‹©æ¨¡æ¿æç¤º -->
    <div v-else>
      <div>
        <p style="font-size: 24px; color: #ff5722; text-align: center">
          ï¼ï¼ï¼æœªé€‰æ‹©ä»»ä½•æ¨¡æ¿ï¼Œè¯·å…ˆé€‰æ‹©ä¸€ä¸ªæ¨¡æ¿ã€‚
        </p>
      </div>
    </div>

    <!-- å‘é€æŒ‰é’® -->
    <el-button
      type="primary"
      :disabled="!selectedRow"
      @click="post"
      style="font-size: 18px; margin-top: 20px"
    >
      âœˆ å‘é€é…ç½®ä¿¡æ¯
    </el-button>
  </div>
</template>

<script>
import { fetchData, postDate } from "../api";

export default {
  data() {
    return {
      tableData: [],
      selectedRowKey: null,
      selectedRow: null,
    };
  },
  methods: {
    async getData() {
      const response = await fetchData();
      this.tableData = response.data;
    },

    handleRowClick(row) {
      this.selectedRow = { ...row };
      this.selectedRowKey = row.id;
    },

    post() {
      postDate(this.selectedRow).then((res) => {
        console.log("res", res.data.msg);
        if (res.data.msg === "success") {
          ElNotification({
            title: "Success",
            message: "é…ç½®ç»“æœä¿å­˜æˆåŠŸï¼",
            type: "success",
          });
        } else {
          ElNotification({
            title: "Error",
            message: "é…ç½®ç»“æœä¿å­˜å¤±è´¥ï¼",
            type: "error",
          });
        }
      });
    },
  },
  mounted() {
    this.getData();
  },
};
</script>

<style scoped>
.custom-table {
  font-size: 14px;
}

.el-table th,
.el-table td {
  padding: 8px 12px;
}

.el-form-item {
  margin-bottom: 10px;
}

.el-form-item label {
  font-size: 16px;
}

.el-input {
  font-size: 16px;
}

.el-button {
  font-size: 18px;
}
</style>
